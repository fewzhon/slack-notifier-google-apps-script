<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><?= appName || 'Configuration Dashboard' ?></title>
    
    <!-- Include Modern UI CSS Framework -->
    <?!= includeAsset("modern-ui-css") ?>
</head>
<body>
    <!-- Dashboard Container -->
    <div class="dashboard-container">
        <!-- Header -->
        <div class="dashboard-header">
            <h1>ðŸ”§ Configuration Dashboard</h1>
            <p>Manage your Slack Notifier settings and monitor system status</p>
            
            <div class="dashboard-user-info" id="userInfo">
                <div class="dashboard-user-avatar" id="userAvatar">ðŸ‘¤</div>
                <div class="dashboard-user-details">
                    <h3 id="userName">Loading...</h3>
                    <p id="userEmail">Loading user information...</p>
                    <span class="dashboard-role-badge" id="userRole">Loading...</span>
                </div>
                <button onclick="signOut()" class="dashboard-sign-out-btn">
                    ðŸšª Sign Out
                </button>
            </div>
        </div>

        <!-- System Status -->
        <div class="dashboard-system-status">
            <h2>ðŸ“Š System Status</h2>
            <div class="dashboard-status-grid" id="systemStatus">
                <div class="loading">
                    <div class="spinner"></div>
                    Loading system status...
                </div>
            </div>
        </div>

        <!-- Configuration Categories -->
        <div class="dashboard-grid" id="configCategories">
            <div class="loading">
                <div class="spinner"></div>
                Loading configuration categories...
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="dashboard-recent-activity">
            <h2>ðŸ“ˆ Recent Activity</h2>
            <div id="recentActivity">
                <div class="loading">
                    <div class="spinner"></div>
                    Loading recent activity...
                </div>
            </div>
        </div>
    </div>

    <!-- Include Dashboard JavaScript Module -->
    <script src="dashboard.js"></script>
    
    <!-- Include Modern UI JavaScript Framework -->
    <?!= includeAsset('modern-ui-js') ?>
    
    <!-- Initialize Dashboard -->
    <script>
        console.log('=== DASHBOARD PAGE LOADING ===');
        
        // Initialize dashboard when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            console.log('=== DOM CONTENT LOADED ===');
            initializeDashboard();
        });
        
        // Fallback initialization if DOMContentLoaded already fired
        if (document.readyState === 'loading') {
            console.log('DOM still loading, waiting for DOMContentLoaded...');
        } else {
            console.log('DOM already loaded, initializing immediately...');
            initializeDashboard();
        }
    </script>
</body>
</html>
